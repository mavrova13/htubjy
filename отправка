Функция TestTest(Запрос)
	Ответ = Новый HTTPСервисОтвет(200);      
	
	 ИмяМетода = Запрос.ПараметрыURL.Получить("HH");
	 	Строка = Запрос.ПараметрыЗапроса.Получить("param");	
    Попытка
	Если ИмяМетода = "Masters" Тогда
		СтруктураОтвета = Новый Структура;
		Массив = Новый Массив;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	 "ВЫБРАТЬ
	 |	Мастера.Наименование КАК Наименование,
	 |	Мастера.Логин КАК Логин,
	 |	Мастера.Пароль КАК Пароль,
	 |	Мастера.Фотография КАК Фотография
	 |ИЗ
	 |	Справочник.Мастера КАК Мастера";	
	РезультатЗапроса = Запрос.Выполнить();    
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		СтруктураЗадачи = Новый Структура;
		СтруктураЗадачи.Вставить("Name", ВыборкаДетальныеЗаписи.Наименование);
		СтруктураЗадачи.Вставить("Login", ВыборкаДетальныеЗаписи.Логин);
		СтруктураЗадачи.Вставить("Password", ВыборкаДетальныеЗаписи.Пароль);
		ДвоичныеДанные = Base64Строка(ВыборкаДетальныеЗаписи.Фотография.Получить());
		СтруктураЗадачи.Вставить("photo", ДвоичныеДанные);  			

        Массив.Добавить(СтруктураЗадачи);
	КонецЦикла;
	СтруктураОтвета.Вставить("Fun", Массив);
	ЗаписьJS = Новый ЗаписьJSON;
	ЗаписьJS.УстановитьСтроку();
	ЗаписатьJSON(ЗаписьJS, СтруктураОтвета);
	Ответ.УстановитьТелоИзСтроки(ЗаписьJS.Закрыть());
	
КонецЕсли; 
Исключение
КонецПопытки;

Попытка
	
	Если ИмяМетода = "Masters" Тогда
		СтруктураОтвета = Новый Структура;
		Массив = Новый Массив;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	Мастера.Наименование КАК Наименование,
		|	Мастера.Логин КАК Логин,
		|	Мастера.Пароль КАК Пароль,
		|	Мастера.Фотография КАК Фотография
		|ИЗ
		|	Справочник.Мастера КАК Мастера";
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
		
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		СтруктураЗадачи = Новый Структура;
		СтруктураЗадачи.Вставить("Name", ВыборкаДетальныеЗаписи.Наименование);
		СтруктураЗадачи.Вставить("Login", ВыборкаДетальныеЗаписи.Логин);
		СтруктураЗадачи.Вставить("Password", ВыборкаДетальныеЗаписи.Пароль);
		ДвоичныеДанные = Base64Строка(ВыборкаДетальныеЗаписи.Фотография.Получить());
		СтруктураЗадачи.Вставить("photo", ДвоичныеДанные);  			

        Массив.Добавить(СтруктураЗадачи);
	КонецЦикла;
	СтруктураОтвета.Вставить("Fun", Массив);
	ЗаписьJS = Новый ЗаписьJSON;
	ЗаписьJS.УстановитьСтроку();
	ЗаписатьJSON(ЗаписьJS, СтруктураОтвета);
	Ответ.УстановитьТелоИзСтроки(ЗаписьJS.Закрыть());
	
КонецЕсли; 
Исключение
КонецПопытки;

	Возврат Ответ;

КонецФункции // TestTest()
		
